<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Language" content="en">
  <meta name="google-site-verification" content="2S8M18BgYs8cLRL6ClTrfW_xGxfFtMZu2b2jhjrNlss">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>SimpleSAMLphp Documentation</title>

  <link rel="stylesheet" href="/res/css/style.css">
  <link rel="stylesheet" href="/res/css/layout.css">
</head>
<body>
<header>
 <div id="header">
  <div class="right">
   <form action="https://www.google.com/cse" method="get" style="margin-top: 2.5rem; margin-right: 2rem">
    <input name="cx" type="hidden" value="004202914224971217557:8ks4jjstupq"/>
    <input name="siteurl" type="hidden" value="www.google.com/cse/home?cx=004202914224971217557:8ks4jjstupq"/>
    <input name="adkw" type="hidden" value="AELymgVJ6Sk-kOvUjbxvgShTLwiFlma2evFuVCh0r8q23vn_4eVnkcdnPfbgMvYUTpJpVlb-KkGAKkbn0i-AlWHsVRR9O0J4CNb6cXFkEKRdjXxsC_NlVD4"/>
    <input name="q" placeholder="Search" type="search" value=""/>
   </form>
  </div>
  <div class="v-center logo-header">
   <div id="logo">
    <a href="https://simplesamlphp.org" style="color: #fff; text-decoration: none">
     <span class="simple">
      Simple
     </span>
     <span class="saml">
      SAML
     </span>
     <span class="simple">
      php
     </span>
    </a>
   </div>
  </div>
 </div>
 <!-- Grey header bar below -->
 <nav>
  <div id="headerbar" style="clear: both">
   <p id="breadcrumb">
    <a href="https://simplesamlphp.org">
     Home
    </a>
    » Documentation
   </p>
   <div class="mtoolbar">
    <div class="menuitem">
     <a href="/docs/2.0/index.html">
      2.0 (stable)
     </a>
    </div>
    <div class="menuitem">
     <a href="/docs/1.19/index.html">
      1.19
     </a>
    </div>
    <div class="menuitem first">
     <a href="/docs/devel/index.html">
      devel
     </a>
    </div>
    <div class="menuitem last">
     <a href="/docs/contributed_modules.html">
      Contributed modules
     </a>
    </div>
   </div>
   <br style="height: 0px; clear: both"/>
  </div>
  <!-- /#headerbar -->
 </nav>
 <div id="content">
 </div>
</header>
<main><h1 id="simplesamlphp-installation-and-configuration">
 SimpleSAMLphp Installation and Configuration
</h1>
<div class="toc">
 <ul>
  <li>
   <a href="#simplesamlphp-installation-and-configuration">
    SimpleSAMLphp Installation and Configuration
   </a>
   <ul>
    <li>
     <a href="#prerequisites">
      Prerequisites
     </a>
    </li>
    <li>
     <a href="#download-and-install-simplesamlphp">
      Download and install SimpleSAMLphp
     </a>
    </li>
    <li>
     <a href="#upgrading-from-a-previous-version-of-simplesamlphp">
      Upgrading from a previous version of SimpleSAMLphp
     </a>
     <ul>
      <li>
       <a href="#upgrading-configuration-files">
        Upgrading configuration files
       </a>
      </li>
      <li>
       <a href="#upgrading-metadata-files">
        Upgrading metadata files
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a href="#configuration">
      Configuration
     </a>
     <ul>
      <li>
       <a href="#location-of-configuration-files">
        Location of configuration files
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a href="#configuring-apache-section_4">
      Configuring Apache {#section_4}
     </a>
    </li>
    <li>
     <a href="#configuring-nginx">
      Configuring Nginx
     </a>
    </li>
    <li>
     <a href="#simplesamlphp-configuration-configphp-section_6">
      SimpleSAMLphp configuration: config.php {#section_6}
     </a>
    </li>
    <li>
     <a href="#configuring-php">
      Configuring PHP
     </a>
     <ul>
      <li>
       <a href="#sending-e-mails-from-php">
        Sending e-mails from PHP
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a href="#enabling-and-disabling-modules">
      Enabling and disabling modules
     </a>
    </li>
    <li>
     <a href="#the-simplesamlphp-admin-interface">
      The SimpleSAMLphp admin interface
     </a>
     <ul>
      <li>
       <a href="#check-your-php-environment">
        Check your PHP environment
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a href="#next-steps">
      Next steps
     </a>
    </li>
    <li>
     <a href="#support">
      Support
     </a>
    </li>
    <li>
     <a href="#appendix-installing-simplesamlphp-in-alternative-locations">
      Appendix: Installing SimpleSAMLphp in alternative locations
     </a>
     <ul>
      <li>
       <a href="#tip">
        Tip
       </a>
      </li>
     </ul>
    </li>
   </ul>
  </li>
 </ul>
</div>
<p>
 This document is part of the SimpleSAMLphp documentation suite.
</p>
<ul>
 <li>
  <a href="https://simplesamlphp.org/docs">
   List of all SimpleSAMLphp documentation
  </a>
 </li>
 <li>
  <a href="https://simplesamlphp.org">
   SimpleSAMLphp homepage
  </a>
 </li>
</ul>
<p>
 This document covers the installation of the latest stable version of SimpleSAMLphp.
If you want to install the development version, take a look at the instructions for
 <a href="simplesamlphp-install-repo.html">
  installing SimpleSAMLphp from the
repository
 </a>
 .
</p>
<h2 id="prerequisites">
 Prerequisites
</h2>
<ul>
 <li>
  A web server capable of executing PHP scripts.
 </li>
 <li>
  PHP version &gt;= 8.0.0.
 </li>
 <li>
  Support for the following PHP extensions:
  <ul>
   <li>
    Always required:
    <code>
     date
    </code>
    ,
    <code>
     dom
    </code>
    ,
    <code>
     fileinfo
    </code>
    ,
    <code>
     filter
    </code>
    ,
    <code>
     hash
    </code>
    ,
    <code>
     intl
    </code>
    ,
    <code>
     json
    </code>
    ,
    <code>
     libxml
    </code>
    ,
    <code>
     mbstring
    </code>
    ,
    <code>
     openssl
    </code>
    ,
    <code>
     pcre
    </code>
    ,
    <code>
     session
    </code>
    ,
    <code>
     simplexml
    </code>
    ,
    <code>
     SPL
    </code>
    and
    <code>
     zlib
    </code>
   </li>
   <li>
    When automatically checking for latest versions, and used by some modules:
    <code>
     cURL
    </code>
   </li>
   <li>
    When authenticating against an LDAP server:
    <code>
     ldap
    </code>
   </li>
   <li>
    When authenticating against a RADIUS server:
    <code>
     radius
    </code>
   </li>
   <li>
    When using the native PHP session handler:
    <code>
     session
    </code>
   </li>
   <li>
    When saving session information to a memcache server:
    <code>
     memcache
    </code>
   </li>
   <li>
    When using databases:
    <ul>
     <li>
      Always required:
      <code>
       PDO
      </code>
     </li>
     <li>
      Database driver: (
      <code>
       mysql
      </code>
      ,
      <code>
       pgsql
      </code>
      , ...)
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li>
  Support for the following PHP packages:
  <ul>
   <li>
    When saving session information to a Redis server:
    <code>
     predis
    </code>
   </li>
  </ul>
 </li>
</ul>
<p>
 What actual packages are required for the various extensions varies between different platforms and distributions.
</p>
<h2 id="download-and-install-simplesamlphp">
 Download and install SimpleSAMLphp
</h2>
<p>
 The most recent release of SimpleSAMLphp can always be found at
 <a href="https://simplesamlphp.org/download">
  https://simplesamlphp.org/download
 </a>
 .
</p>
<p>
 Go to the directory where you want to install SimpleSAMLphp and extract the archive file you just downloaded:
</p>
<div class="highlight">
 <pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/var
tar<span class="w"> </span>xzf<span class="w"> </span>simplesamlphp-x.y.z.tar.gz
mv<span class="w"> </span>simplesamlphp-x.y.z<span class="w"> </span>simplesamlphp
</code></pre>
</div>
<h2 id="upgrading-from-a-previous-version-of-simplesamlphp">
 Upgrading from a previous version of SimpleSAMLphp
</h2>
<p>
 Before starting the upgrade, review the relevant
 <a href="simplesamlphp-upgrade-notes.html">
  upgrade notes
 </a>
 for any relevant
changes.
</p>
<p>
 Extract the new version:
</p>
<div class="highlight">
 <pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/var
tar<span class="w"> </span>xzf<span class="w"> </span>simplesamlphp-x.y.z.tar.gz
</code></pre>
</div>
<p>
 Copy the configuration files from the previous version (in case the configuration directory is inside SimpleSAMLphp,
keep reading for other alternatives):
</p>
<div class="highlight">
 <pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/var/simplesamlphp-x.y.z
rm<span class="w"> </span>-rf<span class="w"> </span>config<span class="w"> </span>metadata
cp<span class="w"> </span>-rv<span class="w"> </span>../simplesamlphp/config<span class="w"> </span>config
cp<span class="w"> </span>-rv<span class="w"> </span>../simplesamlphp/metadata<span class="w"> </span>metadata
</code></pre>
</div>
<p>
 If you have installed any
 <a href="https://simplesamlphp.org/modules">
  third-party modules
 </a>
 or
 <a href="simplesamlphp-theming.md.html">
  customised the theme
 </a>
 ,
you should check whether your third-party modules need upgrading and then copy or replace those directories too.
</p>
<p>
 Replace the old version with the new version:
</p>
<div class="highlight">
 <pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/var
mv<span class="w"> </span>simplesamlphp<span class="w"> </span>simplesamlphp.old
mv<span class="w"> </span>simplesamlphp-x.y.z<span class="w"> </span>simplesamlphp
</code></pre>
</div>
<p>
 If the format of the config files or metadata has changed from your previous version of SimpleSAMLphp (check the
upgrade notes), you may have to update your configuration and metadata after updating the SimpleSAMLphp code.
</p>
<h3 id="upgrading-configuration-files">
 Upgrading configuration files
</h3>
<p>
 A good approach is to run a
 <code>
  diff
 </code>
 between your previous
 <code>
  config.php
 </code>
 file and the new
 <code>
  config.php.dist
 </code>
 file located
the same directory, and apply relevant modifications to the new template. This will ensure that all new
entries in the latest version of config.php are included, as well as preserve your local modifications.
</p>
<h3 id="upgrading-metadata-files">
 Upgrading metadata files
</h3>
<p>
 Most likely the metadata format is backwards compatible. If not, you should receive a very clear error message at
startup indicating how and what you need to update. You should look through the metadata in the
 <code>
  metadata-templates
 </code>
 directory after the upgrade to see whether recommended defaults have been changed.
</p>
<h2 id="configuration">
 Configuration
</h2>
<h3 id="location-of-configuration-files">
 Location of configuration files
</h3>
<p>
 By default, SimpleSAMLphp looks for its configuration in the
 <code>
  config
 </code>
 directory in the root of its own directory. This
has some drawbacks, like making it harder to update SimpleSAMLphp or to install it as a composer dependency, or to
package it for different operating systems.
</p>
<p>
 In order to avoid this limitations, it is possible to specify an alternative location for the configuration directory
by setting the
 <code>
  SIMPLESAMLPHP_CONFIG_DIR
 </code>
 environment variable to point to this location. This way, the configuration
directory doesn't need to be inside the library's directory, making it easier to manage and to update. The simplest way
to set this environment variable is to set it in your web server's configuration. See the next section for more
information.
</p>
<h2 id="configuring-apache-section_4">
 Configuring Apache {#section_4}
</h2>
<p>
 Examples below assume that SimpleSAMLphp is installed in the default location,
 <code>
  /var/simplesamlphp
 </code>
 . You may choose
another location, but this requires a path update in a few files. See Appendix
 <em>
  Installing SimpleSAMLphp
in alternative locations
 </em>
 for more details.
</p>
<p>
 The only subdirectory of
 <code>
  SimpleSAMLphp
 </code>
 that needs to be accessible from the web is
 <code>
  public
 </code>
 . There are several ways of
exposing SimpleSAMLphp depending on the way web sites are structured on your Apache web server. The following is just
one possible configuration.
</p>
<p>
 Find the Apache configuration file for the virtual hosts where you want to run SimpleSAMLphp. The configuration may
look like this:
</p>
<div class="highlight">
 <pre><span></span><code><span class="nt">&lt;VirtualHost</span><span class="w"> </span><span class="s">*</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">ServerName</span><span class="w"> </span>service.example.com
<span class="w">    </span><span class="nb">DocumentRoot</span><span class="w"> </span><span class="sx">/var/www/service.example.com</span>

<span class="w">    </span><span class="nb">SetEnv</span><span class="w"> </span>SIMPLESAMLPHP_CONFIG_DIR<span class="w"> </span><span class="sx">/var/simplesamlphp/config</span>

<span class="w">    </span><span class="nb">Alias</span><span class="w"> </span><span class="sx">/simplesaml</span><span class="w"> </span><span class="sx">/var/simplesamlphp/public</span>

<span class="w">    </span><span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">/var/simplesamlphp/public</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nb">Require</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>granted
<span class="w">    </span><span class="nt">&lt;/Directory&gt;</span>
<span class="nt">&lt;/VirtualHost&gt;</span>
</code></pre>
</div>
<p>
 Note the
 <code>
  Alias
 </code>
 directive, which gives control to SimpleSAMLphp for all urls matching
 <code>
  http(s)://service.example.com/simplesaml/*
 </code>
 . SimpleSAMLphp makes several SAML interfaces available on the web; all of
them are accessible through the
 <code>
  public
 </code>
 subdirectory of your SimpleSAMLphp installation. You can name the alias
whatever you want, but the name must be specified in the
 <code>
  baseurlpath
 </code>
 configuration option in the
 <code>
  config.php
 </code>
 file of
SimpleSAMLphp as described in
 <a href="simplesamlphp-install#section_6.html">
  the section called “SimpleSAMLphp configuration: config.php”
 </a>
 .
Here is an example of how this configuration may look like in
 <code>
  config.php
 </code>
 :
</p>
<div class="highlight">
 <pre><span></span><code><span class="x">$config = [</span>
<span class="x">    [...]</span>
<span class="x">    'baseurlpath' =&gt; 'simplesaml/',</span>
<span class="x">    [...]</span>
<span class="x">]</span>
</code></pre>
</div>
<p>
 Note also the
 <code>
  SetEnv
 </code>
 directive in the Apache configuration. It sets the
 <code>
  SIMPLESAMLPHP_CONFIG_DIR
 </code>
 environment
variable, in this case, to the default location for the configuration directory. You can omit this environment
variable, and SimpleSAMLphp will then look for the
 <code>
  config
 </code>
 directory inside its own directory. If you need to move
your configuration to a different location, you can use this environment variable to tell SimpleSAMLphp where to look
for configuration files. This works only for the
 <code>
  config
 </code>
 directory. If you need your metadata to be in a different
directory too, use the
 <code>
  metadatadir
 </code>
 configuration option to specify the location.
</p>
<p>
 This is just the basic configuration to get things working. For a checklist
further completing your documentation, please see
 <a href="simplesamlphp-maintenance#section_5.html">
  Maintenance and configuration: Apache
 </a>
 .
</p>
<h2 id="configuring-nginx">
 Configuring Nginx
</h2>
<p>
 Examples below assume that SimpleSAMLphp is installed in the default location,
 <code>
  /var/simplesamlphp
 </code>
 . You may choose
another location, but this requires a path update in a few files. See Appendix
 <em>
  Installing SimpleSAMLphp
in alternative locations
 </em>
 for more details.
</p>
<p>
 The only subdirectory of
 <code>
  SimpleSAMLphp
 </code>
 that needs to be accessible from the web is
 <code>
  public
 </code>
 . There are several ways of
exposing SimpleSAMLphp depending on the way web sites are structured on your Nginx web server. The following is just
one possible configuration.
</p>
<p>
 Find the Nginx configuration file for the virtual hosts where you want to run SimpleSAMLphp. The configuration may
look like this:
</p>
<div class="highlight">
 <pre><span></span><code><span class="k">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">443</span><span class="w"> </span><span class="s">ssl</span><span class="p">;</span>
<span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">idp.example.com</span><span class="p">;</span>

<span class="w">    </span><span class="kn">ssl_certificate</span><span class="w">        </span><span class="s">/etc/pki/tls/certs/idp.example.com.crt</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_certificate_key</span><span class="w">    </span><span class="s">/etc/pki/tls/private/idp.example.com.key</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_protocols</span><span class="w">          </span><span class="s">TLSv1.3</span><span class="w"> </span><span class="s">TLSv1.2</span><span class="p">;</span>
<span class="w">    </span><span class="kn">ssl_ciphers</span><span class="w">            </span><span class="s">EECDH+AESGCM:EDH+AESGCM</span><span class="p">;</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="s">^~</span><span class="w"> </span><span class="s">/simplesaml</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kn">alias</span><span class="w"> </span><span class="s">/var/simplesamlphp/public</span><span class="p">;</span>

<span class="w">        </span><span class="kn">location</span><span class="w"> </span><span class="p">~</span><span class="sr">^(?&lt;prefix&gt;/simplesaml)(?&lt;phpfile&gt;.+?\.php)(?&lt;pathinfo&gt;/.*)?$</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kn">include</span><span class="w">          </span><span class="s">fastcgi_params</span><span class="p">;</span>
<span class="w">            </span><span class="kn">fastcgi_pass</span><span class="w">     </span><span class="nv">$fastcgi_pass</span><span class="p">;</span>
<span class="w">            </span><span class="kn">fastcgi_param</span><span class="w"> </span><span class="s">SCRIPT_FILENAME</span><span class="w"> </span><span class="nv">$document_root$phpfile</span><span class="p">;</span>

<span class="w">            </span><span class="c1"># Must be prepended with the baseurlpath</span>
<span class="w">            </span><span class="kn">fastcgi_param</span><span class="w"> </span><span class="s">SCRIPT_NAME</span><span class="w"> </span><span class="s">/simplesaml</span><span class="nv">$phpfile</span><span class="p">;</span>

<span class="w">            </span><span class="kn">fastcgi_param</span><span class="w"> </span><span class="s">PATH_INFO</span><span class="w"> </span><span class="nv">$pathinfo</span><span class="w"> </span><span class="s">if_not_empty</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>
<h2 id="simplesamlphp-configuration-configphp-section_6">
 SimpleSAMLphp configuration: config.php {#section_6}
</h2>
<p>
 There are a few steps that you should complete in the main configuration file,
 <code>
  config.php
 </code>
 , right away:
</p>
<ul>
 <li>
  Set the
  <code>
   baseurlpath
  </code>
  configuration option. Make it point to the canonical URL of your deployment, where
  SimpleSAMLphp can be reached:
 </li>
</ul>
<div class="highlight">
 <pre><span></span><code><span class="x">'baseurlpath' =&gt; 'https://your.canonical.host.name/simplesaml/',</span>
</code></pre>
</div>
<div class="codehilite">
 <pre><span></span><code><span class="n">Please</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">canonical</span><span class="w"> </span><span class="n">URL</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="k">always</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">HTTPS</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">protect</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">users</span><span class="p">.</span><span class="w"> </span><span class="n">Additionally</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span>
<span class="n">are</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">behind</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">**</span><span class="k">reverse</span><span class="w"> </span><span class="k">proxy</span><span class="o">**</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">offloading</span><span class="w"> </span><span class="k">TLS</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">it</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">proper</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">tell</span><span class="w"> </span><span class="n">SimpleSAMLphp</span><span class="w"> </span><span class="n">that</span>
<span class="n">its</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">URL</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">HTTPS</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n n-Quoted">`baseurlpath`</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="k">option</span><span class="w"> </span><span class="n">properly</span><span class="p">.</span><span class="w"> </span><span class="n">SimpleSAMLphp</span><span class="w"> </span><span class="n">deliberately</span>
<span class="o">**</span><span class="n">ignores</span><span class="o">**</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n n-Quoted">`X-Forwarded-*`</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="k">proxy</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="k">set</span><span class="n">ting</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="o">**</span><span class="k">do</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">rely</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">those</span><span class="o">**</span><span class="p">.</span>
</code></pre>
</div>
<ul>
 <li>
  <p>
   Set an administrator password. This is needed to access some of the pages in your SimpleSAMLphp installation web
  interface.
  </p>
  <p>
   Hashed passwords can also be used here. See the
   <a href="./authcrypt/authcrypt.html">
    <code>
     authcrypt
    </code>
   </a>
   documentation
for more information.
  </p>
 </li>
</ul>
<div class="highlight">
 <pre><span></span><code><span class="x">'auth.adminpassword' =&gt; 'setnewpasswordhere',</span>
</code></pre>
</div>
<ul>
 <li>
  Set a secret salt. This should be a random string. Some parts of the SimpleSAMLphp needs this salt to generate
  cryptographically secure hashes. SimpleSAMLphp will give an error if the salt is not changed from the default value.
  The command below can help you to generated a random string on (some) unix systems:
 </li>
</ul>
<div class="highlight">
 <pre><span></span><code>tr<span class="w"> </span>-c<span class="w"> </span>-d<span class="w"> </span><span class="s1">'0123456789abcdefghijklmnopqrstuvwxyz'</span><span class="w"> </span>&lt;/dev/urandom<span class="w"> </span><span class="p">|</span><span class="w"> </span>dd<span class="w"> </span><span class="nv">bs</span><span class="o">=</span><span class="m">32</span><span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="p">;</span><span class="nb">echo</span>
</code></pre>
</div>
<div class="codehilite">
 <pre><span></span><code>Here is an example of the configuration option:
</code></pre>
</div>
<div class="highlight">
 <pre><span></span><code><span class="x">'secretsalt' =&gt; 'randombytesinsertedhere',</span>
</code></pre>
</div>
<div class="codehilite">
 <pre><span></span><code><span class="o">**</span><span class="nv">Please</span><span class="w"> </span><span class="nv">note</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">changing</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">secret</span><span class="w"> </span><span class="nv">salt</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="k">break</span><span class="w"> </span><span class="nv">access</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">services</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">users</span><span class="o">**</span>.
</code></pre>
</div>
<ul>
 <li>
  <p>
   Configure your data storage. You can do this by editing the
   <code>
    store.type
   </code>
   configuration option, and setting it to
  one of the supported values. Now configure the backend of your choice with the relevant options, if needed.
  </p>
 </li>
 <li>
  <p>
   Configure your sessions. You have to configure your sessions with the appropriate parameters so that the cookies
  used by SimpleSAMLphp to track users are always delivered to the software. You may do this by editing the
   <code>
    session.*
   </code>
   configuration options. Note that if you are using the
   <code>
    phpsession
   </code>
   data storage, the cookie-related
  configuration options are configured in the
   <code>
    session.phpsession.*
   </code>
   options.
  </p>
 </li>
 <li>
  <p>
   Set technical contact information. This information will be available in the generated metadata. The e-mail address
  will also be used for receiving error reports sent automatically by SimpleSAMLphp. Here is an example:
  </p>
 </li>
</ul>
<div class="highlight">
 <pre><span></span><code><span class="x">'technicalcontact_name' =&gt; 'John Smith',</span>
<span class="x">'technicalcontact_email' =&gt; 'john.smith@example.com',</span>
</code></pre>
</div>
<ul>
 <li>
  If you use SimpleSAMLphp in a country where English is not widespread, you may want to change the default language
  from English to something else:
 </li>
</ul>
<div class="highlight">
 <pre><span></span><code><span class="x">'language.default' =&gt; 'no',</span>
</code></pre>
</div>
<ul>
 <li>
  Set your timezone
 </li>
</ul>
<div class="highlight">
 <pre><span></span><code><span class="x">'timezone' =&gt; 'Europe/Oslo',</span>
</code></pre>
</div>
<div class="codehilite">
 <pre><span></span><code>You can see [a list of Supported Timezones at php.net](http://php.net/manual/en/timezones.php).
</code></pre>
</div>
<h2 id="configuring-php">
 Configuring PHP
</h2>
<h3 id="sending-e-mails-from-php">
 Sending e-mails from PHP
</h3>
<p>
 Some parts of SimpleSAMLphp will allow you to send e-mails. For example, sending error reports to the technical admin. If
you want to make use of this functionality, you should make sure your PHP installation is configured to be able to
send e-mails.
</p>
<p>
 By default SimpleSAMLphp uses the PHP
 <code>
  mail()
 </code>
 function, which you can configure via
 <code>
  php.ini
 </code>
 .
For more advanced configuration, including using a remote SMTP server, see the
 <code>
  mail.*
 </code>
 options in
 <code>
  config.php
 </code>
 .
</p>
<h2 id="enabling-and-disabling-modules">
 Enabling and disabling modules
</h2>
<p>
 If you want to enable some of the modules that are installed with SimpleSAMLphp, but are disabled by default, you
can do that in the configuration:
</p>
<div class="highlight">
 <pre><span></span><code><span class="x">'module.enable' =&gt; [</span>
<span class="x">    'exampleauth' =&gt; true, // Setting to TRUE enables.</span>
<span class="x">    'saml' =&gt; false, // Setting to FALSE disables.</span>
<span class="x">    'core' =&gt; null, // Unset or NULL uses default for this module.</span>
<span class="x">],</span>
</code></pre>
</div>
<p>
 Set to
 <code>
  true
 </code>
 the modules you want to enable, and to
 <code>
  false
 </code>
 those that you want to disable.
</p>
<p>
 Prior to SSP V2 you could enable or disable modules by setting empty files with names (
 <code>
  enable
 </code>
 ,
 <code>
  disable
 </code>
 ,
 <code>
  default-enable
 </code>
 ) in the module's root directory. You need to now use the
 <code>
  module.enable
 </code>
 config option.
</p>
<h2 id="the-simplesamlphp-admin-interface">
 The SimpleSAMLphp admin interface
</h2>
<p>
 After installing SimpleSAMLphp, you can access the homepage of your installation, which by default does
not show much information:
</p>
<p>
 <code>
  https://service.example.org/simplesaml/
 </code>
</p>
<p>
 The exact URL depends on how you set it up with your web server, and of course on your hostname.
If this works, you can now also acceas the admin module by adding
 <code>
  admin/
 </code>
 to your base URL:
</p>
<p>
 <code>
  https://service.example.org/simplesaml/admin/
 </code>
</p>
<p>
 <strong>
  Warning
 </strong>
 : before you can actually use SimpleSAMLphp for something useful, you need to configure it either as a
Service Provider or as an Identity Provider, depending on your use case.
</p>
<p>
 Here is an example screenshot of what the SimpleSAMLphp page looks like:
</p>
<p>
 <img alt="Screenshot of the SimpleSAMLphp installation page." src="resources/simplesamlphp-install/screenshot-installationpage.png"/>
</p>
<h3 id="check-your-php-environment">
 Check your PHP environment
</h3>
<p>
 At the bottom of the admin page there are some green lights. SimpleSAMLphp runs some tests to see whether the
required and recommended prerequisites are met. If any of the lights are red, you may have to install some PHP
extensions or external PHP packages (e.g. you need the PHP LDAP extension to use the LDAP authentication module).
</p>
<h2 id="next-steps">
 Next steps
</h2>
<p>
 You have now successfully installed SimpleSAMLphp, and the next steps depend on whether you want to setup a Service
Provider (in order to protect access to an existing application) or an Identity Provider (which you would connect to
a user database where your users can authenticate). Documentation on bridging between federation protocols is found
in a separate document.
</p>
<ul>
 <li>
  <a href="simplesamlphp-sp.html">
   Using SimpleSAMLphp as a Service Provider (SP)
  </a>
  <ul>
   <li>
    <a href="simplesamlphp-reference-idp-remote.html">
     Remote IdP reference
    </a>
   </li>
   <li>
    <a href="simplesamlphp-ukaccess.html">
     Connecting to the UK Access Federation or InCommon
    </a>
   </li>
  </ul>
 </li>
 <li>
  <a href="simplesamlphp-idp.html">
   Using SimpleSAMLphp as an Identity Provider (IdP)
  </a>
  <ul>
   <li>
    <a href="simplesamlphp-reference-idp-hosted.html">
     Hosted IdP reference
    </a>
   </li>
   <li>
    <a href="simplesamlphp-reference-sp-remote.html">
     Remote SP reference
    </a>
   </li>
   <li>
    <a href="simplesamlphp-googleapps.html">
     Setting up an IdP for Google Workspace (G Suite / Google Apps)
    </a>
   </li>
   <li>
    <a href="simplesamlphp-idp-more.html">
     Advanced Topics
    </a>
   </li>
  </ul>
 </li>
 <li>
  <a href="/docs/contrib_modules/metarefresh/simplesamlphp-automated_metadata.html">
   Automated Metadata Management
  </a>
 </li>
 <li>
  <a href="simplesamlphp-maintenance.html">
   Maintenance and configuration
  </a>
 </li>
</ul>
<h2 id="support">
 Support
</h2>
<p>
 If you need help to make this work, or want to discuss SimpleSAMLphp with other users of the software, you are
in luck: there is a great Open Source community around SimpleSAMLphp, and you are welcome to join! The forums are open
for you to ask questions, help others by answering their questions, request improvements or contribute with
code or plugins of your own.
</p>
<ul>
 <li>
  <a href="https://simplesamlphp.org">
   Homepage
  </a>
 </li>
 <li>
  <a href="https://simplesamlphp.org/docs/">
   Documentation
  </a>
 </li>
 <li>
  <a href="https://simplesamlphp.org/lists">
   Mailing lists
  </a>
 </li>
</ul>
<h2 id="appendix-installing-simplesamlphp-in-alternative-locations">
 Appendix: Installing SimpleSAMLphp in alternative locations
</h2>
<p>
 There may be several reasons why you want to install SimpleSAMLphp in an alternative way.
</p>
<ul>
 <li>
  <p>
   You are installing SimpleSAMLphp in a hosted environment where you do not have root access, and cannot change
  Apache configuration. You can still install SimpleSAMLphp, keep on reading!
  </p>
 </li>
 <li>
  <p>
   You have full permissions to the server, but cannot edit web server configuration for some reason like internal
  policies.
  </p>
 </li>
</ul>
<p>
 The SimpleSAMLphp package contains one folder named
 <code>
  simplesamlphp-x.y.z
 </code>
 (where
 <code>
  x.y.z
 </code>
 is the version number). In
this folder there are a lot of subfolders for library, metadata, configuration, etc. One of these folders is named
 <code>
  public
 </code>
 .
 <strong>
  Only this folder should be exposed on the web
 </strong>
 . The recommended configuration is to put the whole
 <code>
  simplesamlphp
 </code>
 folder outside the web root, and then link to the
 <code>
  public
 </code>
 folder by using the
 <code>
  Alias
 </code>
 directive, as
described in
 <a href="simplesamlphp-install#section_4.html">
  the section called “Configuring Apache”
 </a>
 . This is not the only
possible way, though.
</p>
<p>
 As an example, let's see how you can install SimpleSAMLphp in your home directory on a shared hosting server.
</p>
<ol>
 <li>
  <p>
   Extract the SimpleSAMLphp archive in your home directory:
  </p>
  <div class="highlight">
   <pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~
tar<span class="w"> </span>xzf<span class="w"> </span>simplesamlphp-1.x.y.tar.gz
mv<span class="w"> </span>simplesamlphp-1.x.y<span class="w"> </span>simplesamlphp
</code></pre>
  </div>
 </li>
 <li>
  <p>
   Then you can try to make a symlink into the
   <code>
    public_html
   </code>
   directory.
  </p>
  <div class="highlight">
   <pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/public_html
ln<span class="w"> </span>-s<span class="w"> </span>../simplesamlphp/public<span class="w"> </span>simplesaml
</code></pre>
  </div>
 </li>
 <li>
  <p>
   Next, you need to set the
   <code>
    baseurlpath
   </code>
   configuration option with the URL pointing to the
   <code>
    simplesaml
   </code>
   link you
   just created in your
   <code>
    public_html
   </code>
   directory. For example, if your home directory is reachable in
   <code>
    https://host.example/~myaccount/
   </code>
   , set the base URL path accordingly:
  </p>
  <div class="highlight">
   <pre><span></span><code><span class="x">'baseurlpath' =&gt; 'https://host.example/~myaccount/simplesaml/',</span>
</code></pre>
  </div>
  <p>
   Now, you can go to the URL of your installation and check if things work:
  </p>
  <p>
   <code>
    https://host.example/~myaccount/simplesaml/
   </code>
  </p>
 </li>
</ol>
<h3 id="tip">
 Tip
</h3>
<p>
 Symlinking may fail, because some Apache configurations do not allow you to link to files from outside the
 <code>
  public_html
 </code>
 folder. If so, you can move the
 <code>
  public
 </code>
 folder instead of symlinking it:
</p>
<div class="highlight">
 <pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/public_html
mv<span class="w"> </span>../simplesamlphp/public<span class="w"> </span>simplesaml
</code></pre>
</div>
<p>
 Now you have the following directory structure.
</p>
<ul>
 <li>
  <p>
   <code>
    ~/simplesamlphp
   </code>
  </p>
 </li>
 <li>
  <p>
   <code>
    ~/public_html/simplesaml
   </code>
   where
   <code>
    simplesaml
   </code>
   is the
   <code>
    public
   </code>
   directory from the
   <code>
    simplesamlphp
   </code>
   installation directory,
  either moved or a symlink.
  </p>
 </li>
</ul>
<p>
 Now, we need to make a few configuration changes. First, let's edit
 <code>
  ~/public_html/simplesaml/_include.php
 </code>
 :
</p>
<p>
 Change the two lines from:
</p>
<div class="highlight">
 <pre><span></span><code><span class="x">require_once(dirname(_FILE__, 2) . '/lib/_autoload.php');</span>
</code></pre>
</div>
<p>
 to something like:
</p>
<div class="highlight">
 <pre><span></span><code><span class="x">require_once(dirname(__FILE__, 3) . '/lib/_autoload.php');</span>
</code></pre>
</div>
<p>
 <strong>
  Warning
 </strong>
 : note that this will make upgrading SimpleSAMLphp much more difficult, since you will need to move the
 <code>
  public
 </code>
 directory and manually edit files every time you upgrade. It is also possible that this method does not work in
future versions of SimpleSAMLphp, and therefore it is discouraged and should be used only as a last resort.
</p>
</main></body>
</html>
